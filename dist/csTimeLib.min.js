!function(){"use strict";angular.module("ed.ui",["ed.ui.services","ed.ui.directives","ed.navigation","ed.messaging"]).constant("edCoreEvents",{DATA_LOADING:"edDataLoading",DATA_LOADED:"edDataLoaded",DATA_LOAD_ERROR:"edDataLoadError"}).constant("edCoreConstants",{errorMessage:{DEFAULT_TEXT:"Error"},errorMessageContexts:{ROUTE:"route",SERVER:"server",RESPONSE_DATA:"responseData",USER:"user",VALIDATION:"validation"},httpCommunication:{status:{NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401,BAD_REQUEST:400,OK:200}},ui:{SCROLL_UP_DELAY:600,SCROLL_UP_OFFSET:0,BLOCKER_OFF_DELAY:300}}).value("edCommonProperties",{selectedLanguage:"ed",language:{cs:{months:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],monthsShort:["led","úno","bře","dub","kvě","čvn","čvc","srp","zář","říj","lis","pro"],weekdays:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],weekdaysShort:["ne","po","út","st","čt","pá","so"],weekdaysMin:["ne","po","út","st","čt","pá","so"],longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:"[příští týden v] LT",lastDay:"[včera v] LT",lastWeek:"[minulý týden v] LT",sameElse:"L"},relativeTime:{future:"za %s",past:"před %s"},abbr:"cs",week:{dow:1,doy:4}},fr:{months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthsShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],weekdays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],weekdaysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],weekdaysMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'à] LT ",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"une année",yy:"%d années"},week:{dow:1,doy:4}}}}).factory("lodash",["$window",function($window){var lodash=$window._;return delete $window._,lodash}]).run(["lodash",function(lodash){}]),angular.module("ed.ui.services",[]),angular.module("ed.ui.directives",[]),angular.module("ed.ui.directives",[])}(),function(){"use strict";angular.module("ed.ui.services").constant("edAlertMessageConstants",{MESSAGE_EVT:"messageEvent"})}(),function(){"use strict";angular.module("ed.ui.directives").directive("edAlertMessage",["$timeout","edAlertMessageConstants","edMessageBus",function($timeout,edAlertMessageConstants,edMessageBus){return{templateUrl:"components/ed/edAlertMessage/edalertmessage.html",restrict:"EA",link:function(scope){var timeoutPromise;edMessageBus.on(edAlertMessageConstants.MESSAGE_EVT,function(event,payLoad){var message=payLoad.message,errorLevel=payLoad.errorLevel,context=payLoad.context;if($timeout.cancel(timeoutPromise),timeoutPromise=null,scope.message=message,angular.isString(message)||scope.errorLevel!==errorLevel||scope.context!==context){scope.context=context,scope.errorLevel=errorLevel;var styles=["alert-danger","alert-warning","alert-success"];errorLevel=Number(errorLevel),(isNaN(errorLevel)||0>errorLevel||errorLevel>styles.length-1)&&(errorLevel=0),scope.style=styles[errorLevel],timeoutPromise=$timeout(function(){scope.message=null},5e3)}}),scope.hide=function(){$timeout.cancel(timeoutPromise),timeoutPromise=null,scope.message=null}}}}]).factory("emitEdAlertMessage",["edMessageBus","edCoreConstants","edAlertMessageConstants",function(edMessageBus,edCoreConstants,edAlertMessageConstants){return function(text,priority,context){context=context||edCoreConstants.errorMessageContexts.ROUTE,priority=isNaN(priority)?2:priority,edMessageBus.emit(edAlertMessageConstants.MESSAGE_EVT,{message:text,errorLevel:priority,context:context})}}])}(),function(){"use strict";angular.module("ed.ui.services").constant("edAppearConstants",{POPUP_CLASS:"ed-popup",POPUP_FULL_CLASS:"ed-popup-full",POPUP_ANIMATE_CLASS:"animate-fade-up"}).factory("edAppear",["$rootScope","$compile","$controller","$injector","$document","$q","edAppearConstants","edPageUtils",function($rootScope,$compile,$controller,$injector,$document,$q,edAppearConstants,edPageUtils){function addBackDrop(animateService){void 0===backDrop&&(backDrop=angular.element("<div></div>"),angular.element(backDrop).addClass("modal-backdrop fade in")),numOpenedBackDrops++,angular.element($document[0].body).append(backDrop)}function removeBackDrop(animateService){numOpenedBackDrops--,0>=numOpenedBackDrops&&(numOpenedBackDrops=0,void 0!==backDrop&&angular.element(backDrop).remove())}var backDrop,serviceInstance={},numOpenedBackDrops=0;return serviceInstance.open=function(options){function close(){null!==animateService&&void 0!==animateService?animateService.leave(popupElement).then(function(){}):angular.element(popupElement).remove(),popupScope.$$appearOptions.backDrop&&removeBackDrop(animateService),popupScope.$$appearOptions=null,edPageUtils.enableScroll()}var deferred=$q.defer(),popupTemplate=angular.element("<div></div>");if(null!==options.templateUrl&&void 0!==options.templateUrl)popupTemplate2=angular.element("<div></div>"),angular.element(popupTemplate).append(popupTemplate2),popupTemplate2.attr("ng-include","'"+options.templateUrl+"'");else{if(null===options.template||void 0===options.template)throw new Error("Appear:Template nor TemplateUrl is set");angular.element(popupTemplate).append(angular.element(options.template))}if(void 0===options.controller||null===options.controller)throw new Error("Appear:Controller is not set");var popupScope=options.scope?options.scope.$new(!0):$rootScope.$new(!0),injects={$scope:popupScope};injects=angular.extend(injects,options.resolve),angular.forEach(options.resolve||[],function(value,key){"$scope"!=key&&(injects[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value))});var popupElement=$compile(popupTemplate)(popupScope);popupScope.popupElement=popupElement;var templateCtrl=$controller(options.controller,injects);angular.element(popupElement).data("$ngControllerController",templateCtrl),angular.element(popupElement).addClass(options.popupClass||edAppearConstants.POPUP_CLASS);var animateService=$injector.get("$animate");return null!==animateService&&void 0!==animateService?(angular.element(popupElement).addClass(options.animateClass||edAppearConstants.POPUP_ANIMATE_CLASS),animateService.enter(popupElement,angular.element($document[0].body)).then(function(){})):angular.element($document[0].body).append(popupElement),popupScope.$$appearOptions=options,popupScope.$$appearOptions.backDrop&&addBackDrop(animateService),edPageUtils.disableScroll(),popupScope.close=function(result){close(),deferred.resolve(result)},popupScope.dismiss=function(reason){close(),deferred.reject(reason)},deferred.promise},serviceInstance}])}(),function(){"use strict";angular.module("ed.ui.directives").run(["$templateCache",function($templateCache){$templateCache.put("edAutoCompleteItem.html",'<a href="#"><span ng-bind-html="match.model.title | typeaheadHighlight:query">{{match}}</span></a>')}]).directive("edAutoComplete",["edAutoCompleteEvents",function(edAutoCompleteEvents){return{restrict:"E",scope:{selectedValue:"=",lookUpMethod:"&",selectedItemHandler:"&",lookUpStartHandler:"&",lookUpEndHandler:"&",required:"=",templateId:"@",placeHolder:"@",focusFirst:"@",query:"=",name:"@",minLength:"@",maxLength:"@",pattern:"@ngPattern",mask:"@mask"},template:"<div class='right-inner-addon'><input name='{{name}}' ed-select-on-click class='form-control' data-ng-model='query' ng-minlength='{{minLength}}' ng-maxlength='{{maxLength}}' typeahead='item for item in lookUp($viewValue) | filter:$viewValue' typeahead-on-select='onSelectedHandler($item)' placeholder='{{placeHolder}}' typeahead-focus-first='{{focusFirst}}' typeahead-template-url='{{templateId}}' ng-required='required' ng-pattern='pattern' ui-maskX='{{mask}}' /></div>",link:function(scope,element,attrs){scope.query=null,scope.items=[],scope.pattern=new RegExp(attrs.ngPattern),scope.onSelectedHandler=function(item){scope.selectedValue=angular.isFunction(scope.selectedItemHandler)?scope.selectedItemHandler({item:item}):item},scope.lookUpStart=function(){angular.isFunction(scope.lookUpStartHandler)&&scope.lookUpStartHandler(),scope.$emit(edAutoCompleteEvents.AUTOCOMPLETE_LOOK_UP_START)},scope.lookUpEnd=function(result){angular.isFunction(scope.lookUpEndHandler)&&scope.lookUpEndHandler({result:result}),scope.$emit(edAutoCompleteEvents.AUTOCOMPLETE_LOOK_UP_END)},scope.lookUp=function(viewValue){return scope.lookUpStart(),scope.lookUpMethod({value:viewValue,resultCallBack:function(response){scope.items=response,scope.lookUpEnd(response)},faultCallBack:function(error){scope.lookUpEnd(error)}})}}}}])}(),function(){"use strict";angular.module("ed.ui.services").constant("edAutoCompleteEvents",{AUTOCOMPLETE_LOOK_UP_START:"autoCompleteLookUpStart",AUTOCOMPLETE_LOOK_UP_END:"autoCompleteLookUpEnd"})}(),function(){"use strict";angular.module("ed.ui.directives").directive("datepickerPopup",function(){return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){controller.$formatters.shift()}}}).directive("edDateTimePicker",["$parse",function($parse){return{scope:{format:"@",dateFrom:"=",dateTo:"=",minDate:"="},templateUrl:"components/ed/edDateTimePicker/eddatetimepicker.html",link:function(scope,element,attrs,ngModelController){function validateDateTo(){if(scope.dateFrom&&scope.dateTo){var timeFrom=scope.dateFrom.getTime(),timeTo=scope.dateTo.getTime();18e5>timeTo-timeFrom&&(scope.dateTo.setTime(scope.dateFrom.getTime()+18e5),scope.dateTo=angular.copy(scope.dateTo))}}function commitValue(){if(scope.dateFrom&&scope.dateTo){if(!scope.date.isAfter(scope.minDate))return void(scope.date=scope.minDate);scope.date.setHours(scope.dateFrom.getHours()),scope.date.setMinutes(scope.dateFrom.getMinutes());var date2=new Date(scope.date.getTime());date2.setHours(scope.dateTo.getHours()),date2.setMinutes(scope.dateTo.getMinutes()),scope.$eval(attrs.dateFrom+"=scope.date"),scope.$eval(attrs.dateTo+"=date2"),scope.dateFrom=scope.date,scope.dateTo=date2}}scope.date=scope.dateFrom,scope.minDate||(scope.minDate=new Date);element.find("input");scope.$watch(function(){return scope.date+scope.dateFrom+scope.dateTo},function(newVal,oldVal){newVal!==oldVal&&scope.$evalAsync(function(){validateDateTo(),commitValue()})}),scope.today=function(){scope.dt=new Date},scope.today(),scope.clear=function(){scope.dt=null},scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),scope.opened=!0},scope.dateOptions={"year-format":"'yy'","starting-day":2},validateDateTo(),commitValue(),scope.$evalAsync(function(){arguments;validateDateTo(),commitValue()})}}}])}(),function(){"use strict";angular.module("ed.ui.directives").directive("edScrollerUp",["$document","edPageNavigation",function($document,edPageNavigation){return{restrict:"AEC",link:function(scope,element,attrs){function scrollHandler(){var st=bodyEl.scrollTop;st>offset?scope.edScrollerUpShow=!0:scope.edScrollerUpShow=!1,scope.$digest()}var bodyEl=$document[0].body,offset=attrs.edScrollerUpOffset||0;"string"==typeof offset&&(offset=parseInt(offset)),angular.element($document).on("scroll",scrollHandler),element.on("click",function(){edPageNavigation.scrollUp()})}}}]).animation(".animated-show-item",function(){return{beforeAddClass:function(element,className,done){"ng-hide"==className?TweenMax.to(element,.4,{opacity:0,scaleX:1.5,scaleY:1.5,ease:Power2.easeOut,onComplete:function(){done()}}):done()},removeClass:function(element,className,done){"ng-hide"==className?(element.css("opacity",0),TweenMax.to(element,.4,{opacity:1,scaleX:1,scaleY:1,onComplete:done})):done()}}})}(),function(){"use strict";angular.module("ed.ui.directives").directive("edTermSelector",["edMessageBus","edAlertMessageConstants","edCoreConstants","EventTermsUtils",function(edMessageBus,edAlertMessageConstants,edCoreConstants,EventTermsUtils){return{templateUrl:"components/ed/edTermSelector/edtermselector.html",scope:{terms:"=",format:"@",today:"=",termAdded:"&",termRemoved:"&",minDate:"="},require:"ngModel",link:function(scope,element,attrs,ngModelController){scope.addTermAction=function(){scope.newTerm=EventTermsUtils.createTerm(),scope.addingNewTerm=!0},scope.confirmAddTermAction=function(){scope.addTerm(angular.copy(scope.newTerm)),scope.addingNewTerm=!1},scope.addTerm=function(term){scope.terms=scope.terms||[],EventTermsUtils.isTermOverlapping(term,scope.terms)?edMessageBus.emit(edAlertMessageConstants.MESSAGE_EVT,{message:"csTime.FORM.TERM_ALREADY_EXIST",errorLevel:0,context:edCoreConstants.errorMessageContexts.VALIDATION}):(scope.terms.push(term),angular.isFunction(scope.termAdded)&&scope.termAdded({term:term})),scope.terms&&scope.terms.length>0?ngModelController.$setValidity("required",!0):ngModelController.$setValidity("required",!1)},scope.removeTerm=function(term){if(!scope.terms)return!1;var index=scope.terms.indexOf(term);index>-1&&scope.terms.splice(index,1),angular.isFunction(scope.termRemoved)&&scope.termRemoved({term:term}),scope.terms&&0!==scope.terms.length||ngModelController.$setValidity("required",!1)}}}}])}(),function(){"use strict";angular.module("ed.events",[]).factory("edEventBus",["$rootScope",function($rootScope){function assertListenerArgs(eventName,func){return angular.isString(eventName)&&angular.isFunction(func)?!0:!1}function assertDispatchArgs(eventName){return angular.isString(eventName)}function addListener(token,func,offFunc){angular.isArray(_listeners[token])?_listeners[token].push({listener:func,offFunction:offFunc}):_listeners[token]=[{listener:func,offFunction:offFunc}]}function removeListener(token,func){if(!angular.isArray(_listeners[token]))for(var l=_listeners[token].length;l--;)if(_listeners[token][l].listener===func){var off=_listeners[token][l].offFunction;return _listeners[token].splice(l,1),_listeners[token].length||delete _listeners[token],off}}var _listeners={},edMessageBusInstance={broadcast:function(eventName,payLoad,scope){assertDispatchArgs(eventName)&&(scope=scope||$rootScope,scope.$broadcast(eventName,payLoad))},emit:function(eventName,payLoad,scope){assertDispatchArgs(eventName)&&(scope=scope||$rootScope,scope.$emit(eventName,payLoad))},on:function(eventName,func,scope){if(assertListenerArgs(eventName,func)){scope=scope||$rootScope;var token=scope.$id+eventName,f=scope.$on(eventName,func);addListener(token,func,f),scope.$on("$destroy",function(event,data){edMessageBusInstance.off(eventName,func,scope)})}},off:function(eventName,func,scope){if(assertListenerArgs(eventName,func)){var token=scope.$id+eventName,f=removeListener(token,func);angular.isFunction(f)&&f()}}};return edMessageBusInstance}])}(),function(){"use strict";angular.module("ed.ui.directives").directive("edClickOutside",["$log","$document",function($log,$document){return function(scope,element,attrs){var documentClickHandler=function(event){for(var path=[event.target],parentElement=event.target.parentElement;parentElement;)path.push(parentElement),parentElement=parentElement.parentElement;-1==path.indexOf(element[0])&&scope.$apply(attrs.clickOutside)};angular.element($document).on("click",documentClickHandler),scope.$on("$destroy",function(){angular.element($document).off("click",documentClickHandler)})}}]).directive("edAutoFocus",["$timeout",function($timeout){return{restrict:"AC",link:function(scope,element){$timeout(function(){element[0].focus()},0,!1)}}}]).directive("edDoFocus",["$timeout","$parse",function($timeout,$parse){return function(scope,element,attrs){var model=$parse(attrs.edDoFocus);scope.$watch(model,function(newVal){(newVal===!0||"true"===newVal)&&$timeout(function(){element[0].focus()},0,!1)}),model.assign&&(element.on("focus",function(){scope.$apply(model.assign(scope,!0))}),element.on("blur",function(){scope.$apply(model.assign(scope,!1))}))}}]).directive("edEscapeHandler",function(){var ESCAPE_KEY=27;return function(scope,element,attrs){element.on("keydown",function(event){event.keyCode===ESCAPE_KEY&&scope.$apply(attrs.edEscapeHandler)})}}).directive("edEditProtect",function(){return function(scope,element,attrs){element.on("keydown cut copy paste",function(event){event.preventDefault(),event.stopImmediatePropagation()})}}).directive("edPasteProtect",function(){return function(scope,element,attrs){element.on("cut copy paste",function(event){event.preventDefault(),event.stopImmediatePropagation()})}}).directive("edSelectOnClick",function(){return function(scope,element,attrs){element.on("click",function(){this.select()})}}).directive("edMin",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attr,ctrl){function validate(value){var min=scope.$eval(attr.edMin)||0;return angular.isNumber(value)&&min>value?void ctrl.$setValidity("min",!1):(ctrl.$setValidity("min",!0),value)}attr.$observe("edMin",function(){var value=ctrl.$viewValue;validate(value),console.log("edMin observed: "+scope.$eval(attr.edMin)+", value: "+value)});var minValidator=function(value){return validate(value)};ctrl.$parsers.push(minValidator),ctrl.$formatters.push(minValidator)}}}).directive("edMax",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attr,ctrl){function validate(value){var max=scope.$eval(attr.edMax)||1/0;return angular.isNumber(value)&&value>max?void ctrl.$setValidity("max",!1):(ctrl.$setValidity("max",!0),value)}attr.$observe("edMax",function(){var value=ctrl.$viewValue;validate(value),console.log("edMax observed: "+scope.$eval(attr.edMax)+", value: "+value)});var maxValidator=function(value){return validate(value)};ctrl.$parsers.push(maxValidator),ctrl.$formatters.push(maxValidator)}}})}(),function(){"use strict";angular.module("ed.messaging",["ed.events"]).factory("edMessageBus",["$rootScope","edEventBus",function($rootScope,edEventBus){var edMessageBusInstance={emit:function(eventName,payLoad){edEventBus.emit(eventName,payLoad,$rootScope)},on:function(eventName,func){edEventBus.on(eventName,func,$rootScope)},off:function(eventName,func){edEventBus.off(eventName,func,$rootScope)}};return edMessageBusInstance}])}(),function(){"use strict";angular.module("ed.navigation",["ui.router","ed.ui.services"]).factory("edPageNavigation",["$location","$state","edPageUtils",function($location,$state,edPageUtils){var lastDesiredState;return{getCurrentState:function(){return $state.current},gotoUrl:function(url){$location.url(url)},gotoState:function(stateName,stateParams){$state.go(stateName,stateParams)},scrollUp:function(time,offset,selector){return edPageUtils.scrollUp(time,offset,selector)},path:function(path){return $location.path(path)},lastDesiredState:function(val){return val?lastDesiredState=val:val===!1&&(lastDesiredState=null),lastDesiredState}}}])}(),function(){"use strict";angular.module("ed.ui.directives").directive("imgLoaded",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){function loadHandler(event){console.log("Image Loaded "+element),scope.$apply(attrs.imgLoaded)}element.on("load",loadHandler),scope.$on("$destroy",function(){element.off("load",loadHandler)})}}}])}(),function(){"use strict";angular.module("ed.ui.services").factory("edPageUtils",["$window","$document","edCoreConstants",function($window,$document,edCoreConstants){var edPageUtils={},scrollBlocks=0,scrollListener=function(event){event.preventDefault(),event.stopPropagation()},keys=[37,38,39,40],keyDownListener=function(e){for(var i=keys.length;i--;)if(e.keyCode===keys[i])return e.preventDefault(),void e.stopPropagation()};return edPageUtils.disableScroll=function(){scrollBlocks++,angular.element($document[0].body).hasClass("noscroll")||angular.element($document[0].body).addClass("noscroll");try{angular.element($window).off("DOMMouseScroll",scrollListener)}catch(error){}angular.element($window).on("DOMMouseScroll",scrollListener),$window.onmousewheel=$document.onmousewheel=scrollListener,$document.onkeydown=keyDownListener},edPageUtils.enableScroll=function(){scrollBlocks--,0===scrollBlocks&&(angular.element($document[0].body).hasClass("noscroll")&&angular.element($document[0].body).removeClass("noscroll"),angular.element($window).off("DOMMouseScroll",scrollListener),$window.onmousewheel=$document.onmousewheel=$document.onkeydown=null)},edPageUtils.isScrollable=function(){var docHeight=angular.element($document[0].body).height(),wHeight=angular.element($window).height();return docHeight>wHeight},edPageUtils.isScrolledIntoView=function(element){var docViewTop=angular.element($window).scrollTop(),docViewBottom=docViewTop+angular.element($window).height(),elemTop=angular.element(element).offset().top,elemBottom=elemTop+angular.element(element).height();return docViewBottom>=elemBottom&&elemTop>=docViewTop},edPageUtils.scrollUp=function(time,offset,selector){return angular.isDefined(time)&&angular.isNumber(time)||(time=edCoreConstants.ui.SCROLL_UP_DELAY),angular.isDefined(offset)&&angular.isNumber(offset)||(offset=edCoreConstants.ui.SCROLL_UP_OFFSET),angular.isString(selector)||(selector="html, body"),window.$||window.jQuery?$(selector).animate({scrollTop:0},time):$document.scrollTop(0,time)},edPageUtils.getBase64Image=function(img,selection,maxImageDimmension){var canvas=document.createElement("canvas"),scaleX=img.naturalWidth/img.width,scaleY=img.naturalHeight/img.height,scale=scaleX>=scaleY?scaleY:scaleX,sourceWidth=selection.width*scale,sourceHeight=selection.height*scale,targetWidth=selection.width*scale,targetHeight=selection.height*scale,widthOverMaximum=Math.max(0,targetWidth-maxImageDimmension),heightOverMaximum=Math.max(0,targetHeight-maxImageDimmension);(widthOverMaximum>0||heightOverMaximum>0)&&(widthOverMaximum>heightOverMaximum?(targetWidth=Math.min(sourceWidth,maxImageDimmension),targetHeight=targetWidth/sourceWidth*sourceHeight):(targetHeight=Math.min(sourceHeight,maxImageDimmension),targetWidth=targetHeight/sourceHeight*sourceWidth)),canvas.width=targetWidth,canvas.height=targetHeight;var ctx=canvas.getContext("2d");ctx.drawImage(img,selection.x1*scale,selection.y1*scale,sourceWidth,sourceHeight,0,0,targetWidth,targetHeight);var dataURL=canvas.toDataURL("image/jpeg");return dataURL.replace("data:image/jpeg;base64,","")},edPageUtils}])}(),function(){"use strict";angular.module("ed.ui").run(["$templateCache",function($templateCache){$templateCache.put("components/ed/edAlertMessage/edalertmessage.html",'<div class="ed-alert-message">\r\n    <div class="animate-fade-up" ng-if="message">\r\n            <div class="col-xs-10 col-xs-offset-1 alert ed-alert-message-inner" ng-class="style">\r\n                    <button type="button" class="close" ng-click="hide()">&times;</button>\r\n                        {{ message | translate}}\r\n                </div>\r\n        </div>\r\n </div>'),$templateCache.put("components/ed/edDateTimePicker/eddatetimepicker.html",'<div class="col-lg-4" dropdown>\r\n    <a dropdown-toggle id="dropdown" role="button" data-toggle="dropdown" >\r\n        <div class="input-group">\r\n            <input type="text" class="form-control"\r\n                data-ng-model="date" datepicker-popup="{{format}}" readonly>\r\n\r\n            <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>\r\n        </div>\r\n    </a>\r\n    <ul class="dropdown-menu">\r\n        <datetimepicker data-ng-model="date" data-datetimepicker-config="{ dropdownSelector: \'#dropdown\', startView:\'month\', minView: \'day\' }"/>\r\n    </ul>\r\n</div>\r\n\r\n<div class="col-lg-4" dropdown>\r\n    <a dropdown-toggle id="dropdown2" role="button" data-toggle="dropdown" >\r\n        <div class="input-group">\r\n            <!--<label for="termFromInput">{{\'csTime.FORM.EVENT_TERM_FROM\' | translate}}</label>-->\r\n            <input id="termFromInput" type="text" class="form-control min-padding-left"\r\n                   data-ng-model="dateFrom" datepicker-popup="{{\'HH:mm\'}}" readonly>\r\n\r\n            <span class="input-group-addon"><i class="glyphicon glyphicon glyphicon-time"></i></span>\r\n        </div>\r\n    </a>\r\n    <ul class="dropdown-menu">\r\n        <datetimepicker data-ng-model="dateFrom" data-datetimepicker-config="{ dropdownSelector: \'#dropdown2\', startView:\'hour\'  }" />\r\n    </ul>\r\n</div>\r\n\r\n<div class="col-lg-4" dropdown>\r\n    <a dropdown-toggle id="dropdown3" role="button" data-toggle="dropdown" >\r\n        <div class="input-group">\r\n            <!--<label for="termToInput">{{\'csTime.FORM.EVENT_TERM_TO\' | translate}}</label>-->\r\n            <input id="termToInput" type="text" class="form-control min-padding-left"\r\n                   data-ng-model="dateTo" datepicker-popup="{{\'HH:mm\'}}" readonly>\r\n\r\n            <span class="input-group-addon"><i class="glyphicon glyphicon glyphicon-time"></i></span>\r\n        </div>\r\n    </a>\r\n    <ul class="dropdown-menu">\r\n        <datetimepicker data-ng-model="dateTo" data-datetimepicker-config="{ dropdownSelector: \'#dropdown3\', startView:\'hour\' }" />\r\n    </ul>\r\n</div>\r\n\r\n<!--{{date}}\r\n{{dateFrom}}\r\n{{dateTo}}-->\r\n\r\n<!--<div class="input-group">\r\n    <div class="ed-datepicker input-group pull-left">\r\n        <input id="eventTermInput" class="form-control" datepicker-popup="{{format}}"\r\n               ng-model="date" is-open="opened" min-date="minDate"\r\n               datepicker-options="dateOptions"\r\n\r\n\r\n               date-disabled="disabled(date, mode)" ng-required="true" close-text="{{\'core.CLOSE\' | translate}}" readonly />\r\n        <div class="input-group-addon"  ng-click="open($event)">\r\n            <i class="glyphicon glyphicon-calendar"></i>\r\n        </div>\r\n    </div>\r\n    <div class="input-group clearfix pull-right">\r\n        <timepicker ng-model="time" minute-step="15" show-meridian="false"></timepicker>\r\n    </div>\r\n</div>-->\r\n\r\n\r\n\r\n\r\n<!--\r\n<datetimepicker data-ng-model="date"></datetimepicker>-->\r\n'),$templateCache.put("components/ed/edTermSelector/edtermselector.html",'\r\n<div class="row  ed-term-selector" style="height: 0;">\r\n    <div class="col-lg-10">\r\n\r\n        <ed-date-time-picker id="eventTermInput" date-from="newTerm.dateFrom" date-to="newTerm.dateTo"\r\n                             format="{{format}}" min-date="minDate"\r\n                             ng-if="addingNewTerm"\r\n                ></ed-date-time-picker>\r\n\r\n    </div>\r\n        <!--<button ng-if="!addingNewTerm"\r\n                class="btn btn-primary btn-small animated-item" ng-click="addTermAction()">{{ \'csTime.ADD_TERM\' | translate }}</button>\r\n\r\n        <button ng-if="addingNewTerm"\r\n                class="btn btn-primary btn-small animated-item" ng-click="confirmAddTermAction()">{{ \'core.OK\' | translate }}</button>-->\r\n\r\n\r\n    <div class="col-lg-10" ng-if="!addingNewTerm">\r\n        <ul class="list-group" style="overflow-y: auto; max-height: 110px;">\r\n            <li class="list-group-item animated-item clearfix" ng-repeat="term in terms">\r\n                {{term | term:\'short\'}}\r\n                <span class="nav pull-right" ng-click="removeTerm(term)"><a href="" ><i class="glyphicon glyphicon-remove"></i></a> </span>\r\n\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n\r\n    <div class="col-lg-2">\r\n        <button ng-if="!addingNewTerm" class="btn btn-primary pull-right" ng-click="addTermAction()">\r\n           <i class="glyphicon glyphicon-plus-sign" ></i></button>\r\n\r\n        <button ng-if="addingNewTerm" class="btn btn-primary pull-right" ng-click="confirmAddTermAction()">\r\n            <i class="glyphicon glyphicon-ok-sign" ></i></button>\r\n    </div>\r\n\r\n</div>')}])}();